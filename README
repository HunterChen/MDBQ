MongoDB Queue

Lightweight C++ Job Queue using MongoDB for queues

Control flow is either by you or using boost.asio.

Own control flow:

    // in your server program instance:
    Hub hub("localhost", "test.col");
    hub.insert_job(BSON("foo"<<1<<"bar<<2), 1000);

    // in your workers
    Client clt("localhost", "test.col");
    mongo::BSONObj task;
    clt.get_next_task(task);
    clt.log(BSON("level"<<0<<"progress"<<"10%"));
    clt.log(BSON("level"<<0<<"progress"<<"50%"));
    clt.checkpoint(); // flush log to server, mark that we're still working
    clt.log(BSON("level"<<0<<"progress"<<"80%"));
    clt.finish(BSON("baz"<<3));

Boost.Asio control flow:

    // similar to above, but you will have to overload handlers, then do
    boost::asio::io_service io;
    clt.reg(io, 1); // on client
    hub.reg(io, 1); // on hub
    io.run();
